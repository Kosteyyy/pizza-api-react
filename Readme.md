# API доставки пиццы

## Full-stack serverless приложение на React + TypeScript + RTK Query + AWS Lambda + DinamoDB

Приложение для моделирования согласованной работы клиента заказа пиццы, пиццерии и службы доставки.

1. На стороне клиента (сайт пиццерии, главная страница приложения) создается заказ пиццы (упрощенно).
2. Создается запрос заказа пиццы в пиццерию через API пиццерии. Пиццерия видит что у неё заказ.
3. При получении запроса пиццерия автоматически размещает заказ на доставку через API службы доставки с указанием адреса и времени забора.
4. Служба доставки забирает пиццу и доставляет. Курьер отмечает этапы доставки и клиент и пиццерия автоматически видят статус заказа.

# FrontEnd

Приложение написано на ReactJS + TypeScript с использованием RTK Query для выполнения API запросов.

Первая страница моделирует клиентский сайт. Клиент может выбрать пиццу и заказать её. При заказе отправляется запрос к API пиццы. Заказ добавляется в список заказов клиента. Клиент видит список заказов и статус заказа.

Вторая страница моделирует внутренний сайт пиццерии. При размещении заказа клиентом в списке заказов появляется заказ. При изменении статуса заказа в службе доставки в заказах пиццерии это отображается.

Третья страница моделирует внутренний сайт службы доставки. При поступлении заказа от пиццерии (заказы могут поступать через API службы доставки от разных компаний в приницпе) заказ с адресом забора товара и временем отображается в списке заказов со статусом "Курьер едет за товаром". При изменении стадии доставки служба доставки меняет его (Доставляется -> Доставлен). Новый статус через API пиццерии отображается в заказах клиента и пиццерии.

## API пиццерии - бессерверное приложение Node.JS + AWS Lambda + DynamoDB

API пиццерии выполнено в виде бессерверной лямбда функции с размещением на AWS Lambda. Данные заказов хранятся в базе данных DynamoDB. При создании заказа клиентом приходит запрос на эндпоинт /create-order. Лямбда функция обрабатывает запрос и отправляет запрос на доставку к API службы доставки и сообщает службе доставки webhook для сообщений об изменении статуса заказа. При получении подтверждения с айди заказа доставки заказ пишется в базу данных. При изменении статуса заказа поступают запросы от службы доставки с изменением статуса, что также отражается в базе данных и у клиента. При отмене заказа клиентом API пиццерии автоматически отменяет заказ доставки.

## API службы доставки - бессерверное приложение Node.JS + AWS Lambda + DynamoDB

Аналогичная функция со своей записью в базе данных. При размещении заказа получается адрес заказчика и время доставки. Заказчику возвращается айди доставки. Заказ доставки пишется в базу данных. При изменении статуса доставки служба доставки информирует пиццерию через предоставленный webhook. У пиццерии обновляется статус.
